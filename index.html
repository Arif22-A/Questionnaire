<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OCEAN BAR & KITCHEN</title>

  <!-- jsPDF -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <style>
    :root {
      --bg: #080808;
      --card: #0f0f0f;
      --gold: #FFD700;
      --muted: #cfcfcf;
    }
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--bg);
      color: var(--gold);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    .wrap{
      max-width:980px;
      margin:18px auto;
      padding:20px;
    }
   .header-container {
  border: 2px solid gold; /* garis emas */
  border-radius: 12px;
  padding: 15px 20px;
  text-align: center;
  background: rgba(20,20,20,0.9);
  margin-bottom: 20px;
}

.header-container h1 {
  margin: 8px 0;
  color: #FFD700;
}

.header-container .lead {
  margin: 4px 0;
  color: #fff;
  font-size: 13px;
}

.header-container .lead-small {
  margin: 4px 0;
  color: #fff;
  font-size: 11px;
}

    header img.logo {
      width:200px;
      height:auto;
      display:block;
      margin:0 auto 10px;
    }
    h1{ margin:4px 0 6px; font-size:20px; color:#F0F8FF; }
    .lead{ color:#F0F8FF; margin:2px 0; font-size:14px; }
    .lead-small{ color:var(--muted); font-size:13px; margin-top:6px; }

    .card{
      background: rgba(15,15,15,0.95);
      border: 2px solid var(--gold);
      box-shadow: 0 6px 24px rgba(255,215,0,0.06);
      border-radius:12px;
      padding:18px;
      margin-top:18px;
    }
    fieldset{
      border:1px dashed rgba(255,215,0,0.15);
      padding:12px;
      border-radius:8px;
      margin-bottom:14px;
      color:var(--gold);
    }
    legend{ color:var(--gold); padding:0 6px; font-weight:600; }
    label{ display:block; margin:8px 0; color:#F0F8FF; }
    input[type="text"], input[type="number"], select, textarea {
      width:100%;
      padding:8px;
      border-radius:6px;
      border:1px solid rgba(255,215,0,0.18);
      background:#0b0b0b;
      color:var(--gold);
      box-sizing:border-box;
      font-size:14px;
    }
    textarea{ min-height:72px; resize:vertical; }

    .row { display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
    .btn {
      background: linear-gradient(45deg,var(--gold), #ffa500);
      border:none;
      color:#000;
      padding:10px 16px;
      border-radius:999px;
      cursor:pointer;
      font-weight:700;
      box-shadow:0 6px 18px rgba(255,215,0,0.12);
    }
    .btn:disabled{ opacity:0.6; cursor:not-allowed; transform:none; box-shadow:none; }
    .muted{ color:var(--muted); font-size:13px; }

    .voucher-card{
      background: linear-gradient(180deg, rgba(255,240,200,0.04), rgba(10,10,10,0.05));
      padding:14px;
      border-radius:10px;
      border:1px solid rgba(255,215,0,0.15);
      margin-top:14px;
      display:none;
      text-align:center;
    }
    .voucher-card img{ max-width:320px; width:90%; display:block; margin:8px auto; border-radius:6px; }

    .btn-row{ display:flex; gap:10px; justify-content:center; margin-top:12px; flex-wrap:wrap; display:none; }

    /* popup */
    #voucherPopup{
      position:fixed; inset:0; display:none; align-items:center; justify-content:center;
      background: rgba(0,0,0,0.7); z-index:9999;
    }
    .popup-content{
      background:#111; color:var(--gold); padding:20px; border-radius:10px; width:min(520px,94%);
      box-shadow:0 10px 40px rgba(0,0,0,0.6);
      border:1px solid rgba(255,215,0,0.12);
    }
    .close-btn{ background:none;border:none;color:var(--gold); font-size:18px; cursor:pointer; position:absolute; right:18px; top:14px;}
    .loading-inline{ display:inline-block; margin-left:8px; color:#fff; background:#222; padding:6px 8px; border-radius:999px; font-size:13px; }

    footer{ text-align:center; color:var(--muted); margin-top:18px; padding:10px; border-top:1px solid rgba(255,215,0,0.04); }
    .rating-grid {
  display: grid;
  grid-template-columns: 1fr 1fr; /* 2 kolom */
  gap: 12px 20px; /* jarak antar item */
}

.rating-grid > div {
  background: rgba(30,30,30,0.7);
  padding: 10px;
  border-radius: 8px;
  color: #FFD700;
}
/* ========== TOMBOL EMAS ========== */
button.golden {
background: linear-gradient(45deg,var(--gold), #ffa500);
      border:none;
      color:#000;
      padding:10px 16px;
      border-radius:999px;
      cursor:pointer;
      font-weight:700;
      box-shadow:0 6px 18px rgba(255,215,0,0.12);
}

button.golden:hover {
  transform: scale(1.05);
  opacity: 0.9;
}
button.golden span {
  text-transform: capitalize;
}

  .social-container {
  text-align: center;
  padding: 20px;
  margin: 30px auto;
  background: gold;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
  max-width: 600px;
}

.social-title {
  margin: 0 0 8px;
  font-size: 1.2rem;
  font-weight: 700;
  color: #1e293b;
}

.social-subtitle {
  margin: 0 0 16px;
  font-size: 0.95rem;
  color: #475569;
}

.social-links {
  display: flex;
  justify-content: center;
  gap: 12px;
  flex-wrap: wrap;
}

.social-btn {
  text-decoration: none;
  padding: 10px 16px;
  border-radius: 8px;
  font-weight: 600;
  transition: all 0.2s ease;
}

.social-btn.insta { background: #e1306c; color: #fff; }
.social-btn.fb { background: #1877f2; color: #fff; }
.social-btn.wa { background: #25d366; color: #fff; }
.social-btn.email { background: #ffff00; color: #fff; }


.social-btn:hover {
  opacity: 0.85;
  transform: translateY(-2px);
}
.social-btn {
  width: 150px;
}

  </style>
</head>
<body>
  <div class="header-container">
 <header id="restoHeader">
  <div class="container header-container">
    <!-- Logo -->
   <img src="logo.png" alt="Logo Restoran" id="restoLogo" class="logo">

    <!-- Info resto -->
    <div class="resto-info">
      <h1 id="restoName">OCEAN BAR &amp; KITCHEN</h1>
      
      <!-- Alamat -->
      <p id="restoAddress1" class="lead">üìç Jl. Ahmad Yani 34, Kutorejo, Sragen Tengah</p>
      <p id="restoAddress2" class="lead">Kec. Sragen, Kab. Sragen, Jawa Tengah 57212</p>
      
      <!-- Kontak -->
      <p id="restoContact" class="lead">‚òéÔ∏è +62 857-1246-9835</p>
      
      <br>
      
      <!-- Tagline / highlight -->
      <p id="restoTagline" class="lead-highlight">HALLO OCEANER'S...</p>
      <p class="lead">
        Bantu kami berkembang ‚Äî isi kuesioner singkat ini.<br>
        Semua jawaban bersifat anonim.
      </p>
    </div>
  </div>
</header>


    <div class="card">
      <form id="survey" autocomplete="off">
        <fieldset>
          <legend>Informasi Meja & Responden</legend>
          <label>Nama
            <input type="text" id="nama" placeholder="Contoh: Budi">
          </label>
          <label>Nomor Meja
            <input type="text" id="meja" placeholder="Contoh: 12">
          </label>
          <div class="row">
            <label style="flex:1">Usia
              <select id="usia">
                <option value="">Pilih usia</option>
                <option value="<18">&lt;18</option>
                <option value="18-25">18‚Äì25</option>
                <option value="26-35">26‚Äì35</option>
                <option value="36-45">36‚Äì45</option>
                <option value=">45">&gt;45</option>
              </select>
            </label>

            <label style="flex:1">Jenis Kelamin
              <select id="gender">
                <option value="">Pilih</option>
                <option value="Laki-laki">Laki-laki</option>
                <option value="Perempuan">Perempuan</option>
                <option value="Prefer not to say">Prefer not to say</option>
              </select>
            </label>
          </div>

          <label>Frekuensi kunjungan
            <select id="freq">
              <option value="">Pilih</option>
              <option value="Pertama kali">Pertama kali</option>
              <option value="1-2 kali/bulan">1‚Äì2 kali/bulan</option>
              <option value="3-5 kali/bulan">3‚Äì5 kali/bulan</option>
              <option value=">5 kali/bulan">&gt; 5 kali/bulan</option>
            </select>
          </label>
        </fieldset>
        <div>
        <label class="field">Tanggal & Jam</label>
         <input type="text" id="waktu" readonly />
         </div>

       <fieldset>
  <legend>Penilaian (1 = Tidak Puas, 5 = Sangat Puas)</legend>
  <div id="ratingContainer" class="rating-grid"></div>
</fieldset>


        <fieldset>
          <legend>Komentar</legend>
          <label>Apa yang paling Anda sukai?
            <textarea id="suka" placeholder="Tulis komentar singkat..."></textarea>
          </label>
          <label>Apa yang perlu diperbaiki?
            <textarea id="perbaikan" placeholder="Masukkan saran..."></textarea>
          </label>
          <label>Menu seperti apa yang anda inginkan untuk kami hadirkan?
            <textarea id="menu" placeholder="Masukkan saran..."></textarea>
          </label>
        </fieldset>

        <fieldset>
          <legend>Rekomendasi</legend>
          <label class="muted">Apakah Anda akan merekomendasikan restoran kami?</label>
          <div class="row" style="margin-top:8px;">
            <label style="display:flex;gap:8px;align-items:center"><input type="radio" name="rekomend" value="Ya"> Ya</label>
            <label style="display:flex;gap:8px;align-items:center"><input type="radio" name="rekomend" value="Tidak"> Tidak</label>
          </div>
        </fieldset>

        <div style="text-align:center; margin-top:8px;">
          <button type="button" id="saveBtn" class="btn">Simpan</button>
          <span id="loadingSpinner" class="loading-inline" style="display:none">‚è≥ Menyimpan...</span>
        </div>

        <div class="voucher-card" id="voucherCard" aria-hidden="true">
          <h3 style="color:#fff">üéâ Selamat! Anda mendapatkan Voucher Diskon üéâ</h3>
          <!-- voucher image (hidden in page?) visible in card -->
          <img id="voucherImg" src="voucher.png" alt="Voucher Resto">
          <div style="margin-top:8px;">
            <button type="button" id="claimVoucher" class="btn" style="display:inline-flex;align-items:center;gap:8px;">
              <span id="claimText">Klaim Voucher</span>
              <span id="claimSpinner" class="loading-inline" style="display:none">‚è≥</span>
            </button>
          </div>
        </div>

        <div class="btn-row" id="finalButtons" aria-hidden="true">
          <button type="button" id="resetBtn" class="golden">Reset</button>
         <button id="downloadSendBtn" class="golden"><span>Kirim</span></button>
        </div>
      </form>
    </div>

  <div id="voucherPopup" style="display:none;position:fixed;inset:0;align-items:center;justify-content:center;background:rgba(0,0,0,0.7);z-index:9999;">
  <div class="popup-content" style="background:#111;color:var(--gold);padding:24px;border-radius:12px;width:min(500px,90%);box-shadow:0 10px 40px rgba(0,0,0,0.6);border:1px solid rgba(255,215,0,0.2);position:relative;">
    
    <!-- Tombol Tutup -->
    <button class="close-btn" aria-label="Tutup" 
      style="background:none;border:none;color:var(--gold);font-size:20px;cursor:pointer;position:absolute;right:16px;top:14px;">
      ‚úï
    </button>

    <!-- Judul -->
    <h3 style="margin-top:0;margin-bottom:10px;text-align:center;font-size:18px;color:#FFD700">
      üéâ Klaim Voucher Berhasil üéâ
    </h3>

    <!-- Instruksi -->
    <p style="color:#f0f0f0;font-size:14px;text-align:center;margin-bottom:14px">
      Silakan ikuti panduan berikut untuk mengirimkan hasil kuesioner Anda:
    </p>

    <ol style="color:var(--muted);line-height:1.6;font-size:14px;padding-left:20px;">
      <li>Pastikan file PDF kuesioner sudah berhasil <strong>di-download</strong>.</li>
      <li>Klik tombol kirim di bawah voucher.</li>
      <li>Anda akan diarahkan ke Chat room WA admin</li>
      <li>Tekan tombol <em>üìé Lampiran</em>, pilih <strong>Dokumen</strong>.</li>
      <li>Kirimkan file PDF kuesioner yang sudah diunduh tadi.</li>
      <li>Tunggu konfirmasi dari Admin untuk validasi voucher Anda.</li>
    </ol>

    <!-- Footer -->
    <p style="margin-top:18px;text-align:center;font-size:13px;color:#aaa">
      Terima kasih sudah berpartisipasi üíõ
    </p>
  </div>
</div>

    <!-- Container Sosial Media -->
<div class="social-container">
  <h3 class="social-title">üåê Temukan & Ikuti Kami</h3>
  <p class="social-subtitle">Dukung terus Ocean Bar & Kitchen dengan follow sosial media kami:</p>
  
  <div class="social-links">
    <a href="https://instagram.com/ocean.srg?igsh=dWtlbmV6a2F4ZXNu&utm_source=qr" target="_blank" class="social-btn insta">üì∑ Instagram</a>
    <a href="https://facebook.com/username" target="_blank" class="social-btn fb">üìò Facebook</a>
    <a href="https://wa.me/6285712469835" target="_blank" class="social-btn wa">üí¨ WhatsApp</a>
    <a href="mailto:oceanbar.kitchen@gmail.com" class="social-btn email">‚úâÔ∏è Email</a>
  </div>
</div>


    <footer>
      ¬©2025 OCEAN BAR & KITCHEN ‚Äî All rights reserved
    </footer>
  </div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  // ====== Pertanyaan Rating ======
  const pertanyaan = [
    "Kebersihan",
    "Pelayanan",
    "Kecepatan Layanan",
    "Kenyamanan Tempat",
    "Seberapa ramah dan sopan staff kami",
    "Seberapa peduli staff kami terhadap anda",
    "Seberapa bervariasi dari daftar menu kami",
    "Apakah harga sesuai kualitas & kuantitas makanan",
    "Rasa Makanan yang kami sajikan",
    "Rasa Minuman yang kami sajikan"
  ];

  const container = document.getElementById("ratingContainer");

  pertanyaan.forEach((q, i) => {
    const div = document.createElement("div");

    // label pertanyaan
    const label = document.createElement("label");
    label.textContent = `${i + 1}. ${q}`;
    div.appendChild(label);
    div.appendChild(document.createElement("br"));

    // input radio 1‚Äì5
    [1, 2, 3, 4, 5].forEach((n) => {
      const input = document.createElement("input");
      input.type = "radio";
      input.name = `rating${i}`;
      input.value = n;

      const span = document.createElement("span");
      span.textContent = n;

      div.appendChild(input);
      div.appendChild(span);
    });

    container.appendChild(div);
  });

  // ====== Element Refs ======
  const saveBtn = document.getElementById("saveBtn");
  const spinner = document.getElementById("loadingSpinner");
  const voucherCard = document.getElementById("voucherCard");
  const claimBtn = document.getElementById("claimVoucher");
  const claimSpinner = document.getElementById("claimSpinner");
  const claimText = document.getElementById("claimText");
  const finalButtons = document.getElementById("finalButtons");
  const popup = document.getElementById("voucherPopup");
  const closePopup = popup.querySelector(".close-btn");
  const downloadSendBtn = document.getElementById("downloadSendBtn");
  const resetBtn = document.getElementById("resetBtn");

  // awal: tombol reset & kirim disembunyikan
  finalButtons.style.display = "none";

  // ====== Helper: Save / Load Local ======
  function saveToLocal() {
    const data = {
      nama: document.getElementById("nama").value || "",
      meja: document.getElementById("meja").value || "",
      usia: document.getElementById("usia").value || "",
      gender: document.getElementById("gender").value || "",
      freq: document.getElementById("freq").value || "",
      rekomend: document.querySelector('input[name="rekomend"]:checked')?.value || "",
      suka: document.getElementById("suka").value || "",
      perbaikan: document.getElementById("perbaikan").value || "",
      menu: document.getElementById("menu").value || "",
      ratings: pertanyaan.map(
        (q, i) => document.querySelector(`input[name="rating${i}"]:checked`)?.value || ""
      ),
    };
    localStorage.setItem("ocean_kuesioner", JSON.stringify(data));
  }

  function loadFromLocal() {
    const raw = localStorage.getItem("ocean_kuesioner");
    if (!raw) return;
    try {
      const data = JSON.parse(raw);
      document.getElementById("nama").value = data.nama || "";
      document.getElementById("meja").value = data.meja || "";
      document.getElementById("usia").value = data.usia || "";
      document.getElementById("gender").value = data.gender || "";
      document.getElementById("freq").value = data.freq || "";
      if (data.rekomend) {
        const el = document.querySelector(`input[name="rekomend"][value="${data.rekomend}"]`);
        if (el) el.checked = true;
      }
      document.getElementById("suka").value = data.suka || "";
      document.getElementById("perbaikan").value = data.perbaikan || "";
      document.getElementById("menu").value = data.menu || "";
      (data.ratings || []).forEach((val, i) => {
        if (val) {
          const r = document.querySelector(`input[name="rating${i}"][value="${val}"]`);
          if (r) r.checked = true;
        }
      });
    } catch (e) {}
  }

  // ====== Auto isi waktu ======
  const now = new Date();
  const tanggal = now.toLocaleDateString("id-ID", {
    weekday: "long",
    year: "numeric",
    month: "long",
    day: "numeric",
  });
  const jam = now.toLocaleTimeString("id-ID", {
    hour: "2-digit",
    minute: "2-digit",
    second: "2-digit",
  });
  document.getElementById("waktu").value = `${tanggal} - ${jam}`;

  // ====== PDF Export ======
// === Helper function konversi image DOM ke Base64 ===
function imgToBase64(imgEl) {
  return new Promise((resolve, reject) => {
    try {
      const canvas = document.createElement("canvas");
      const ctx = canvas.getContext("2d");
      canvas.width = imgEl.naturalWidth;
      canvas.height = imgEl.naturalHeight;
      ctx.drawImage(imgEl, 0, 0);
      resolve(canvas.toDataURL("image/png"));
    } catch (err) {
      reject(err);
    }
  });
}

// === Fungsi utama savePDF ===
async function savePDF() {
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF("p", "mm", "a4");

  // ===== Ambil data header dari DOM =====
  const namaResto   = document.getElementById("restoName")?.innerText || "";
  const alamat1     = document.getElementById("restoAddress1")?.innerText || "";
  const alamat2     = document.getElementById("restoAddress2")?.innerText || "";
  const kontakResto = document.getElementById("restoContact")?.innerText || "";
  const taglineResto= document.getElementById("restoTagline")?.innerText || "";
  const logoEl      = document.getElementById("restoLogo");

  // ===== Tambahkan logo kalau ada =====
  if (logoEl) {
    try {
      const logoBase64 = await imgToBase64(logoEl);
      pdf.addImage(logoBase64, "PNG", 160, 10, 30, 30); // kanan atas
    } catch(e) {
      console.error("Gagal konversi logo:", e);
    }
  }

  // ===== Tambahkan teks header =====
  pdf.setFontSize(16);
  pdf.text(namaResto, 10, 15);
  pdf.setFontSize(11);
  pdf.text(alamat1, 10, 22);
  pdf.text(alamat2, 10, 28);
  pdf.text(kontakResto, 10, 34);
  pdf.setFontSize(10);
  pdf.text(`Tagline: ${taglineResto}`, 10, 40);

  pdf.line(10, 44, 200, 44); // garis pemisah

  // ===== Data form =====
  let y = 54;
  const waktu     = document.getElementById("waktu").value || "-";
  const nama      = document.getElementById("nama").value || "-";
  const meja      = document.getElementById("meja").value || "-";
  const usia      = document.getElementById("usia").value || "-";
  const gender    = document.getElementById("gender").value || "-";
  const freq      = document.getElementById("freq").value || "-";
  const rekomend  = document.querySelector('input[name="rekomend"]:checked')?.value || "-";
  const suka      = document.getElementById("suka").value || "-";
  const perbaikan = document.getElementById("perbaikan").value || "-";
  const menu      = document.getElementById("menu").value || "-";

  pdf.setFontSize(12);
  pdf.text(`Tanggal & Jam   : ${waktu}`, 10, y); y+=8;
  pdf.text(`Nama Pengisi    : ${nama}`, 10, y); y+=8;
  pdf.text(`Nomor Meja      : ${meja}`, 10, y); y+=8;
  pdf.text(`Usia            : ${usia}`, 10, y); y+=8;
  pdf.text(`Jenis Kelamin   : ${gender}`, 10, y); y+=8;
  pdf.text(`Frekuensi       : ${freq}`, 10, y); y+=8;
  pdf.text(`Rekomendasi     : ${rekomend}`, 10, y); y+=12;

  // ===== Rating =====
  pdf.setFontSize(12);
  pdf.text("Penilaian:", 10, y); y+=8;
  pertanyaan.forEach((q, i) => {
    const val = document.querySelector(`input[name="rating${i}"]:checked`)?.value || "-";
    pdf.setFontSize(10);
    pdf.text(`${i + 1}. ${q} = ${val}`, 15, y);
    y += 6;
    if (y > 260) {
      pdf.addPage();
      y = 20;
    }
  });
  y+=8;

  // ===== Suka / Perbaikan / Menu =====
  pdf.setFontSize(12);
  pdf.text("Yang Disukai:", 10, y); y+=6;
  pdf.setFontSize(10);
  pdf.text(suka, 15, y, { maxWidth: 180 }); y+=12;

  pdf.setFontSize(12);
  pdf.text("Perlu Perbaikan:", 10, y); y+=6;
  pdf.setFontSize(10);
  pdf.text(perbaikan, 15, y, { maxWidth: 180 }); y+=12;

  pdf.setFontSize(12);
  pdf.text("Menu yang Diinginkan:", 10, y); y+=6;
  pdf.setFontSize(10);
  pdf.text(menu, 15, y, { maxWidth: 180 }); y+=12;
     // ===== Voucher image =====
const voucherEl = document.querySelector("#voucherCard img");
if (voucherEl) {
  try {
    const voucherBase64 = await imgToBase64(voucherEl);
    if (voucherBase64) {
      pdf.setFontSize(12);
      pdf.text("Voucher:", 10, y); 
      y += 6;
      // perkecil ukuran biar muat (100x30 misalnya)
      pdf.addImage(voucherBase64, "PNG", 10, y, 100, 30);
      y += 40; // jarak setelah voucher
    }
  } catch(e) {
    console.error("Gagal konversi voucher:", e);
  }
}
  // ===== Footer =====
  pdf.setFontSize(10);

  // Simpan file
  pdf.save("kuesioner.pdf");
}
  // ====== Save Button ======
  saveBtn.addEventListener("click", () => {
    const meja = document.getElementById("meja").value.trim();
    const usia = document.getElementById("usia").value;
    const gender = document.getElementById("gender").value;
    const freq = document.getElementById("freq").value;
    const rekomend = document.querySelector('input[name="rekomend"]:checked');
    let allRated = true;
    for (let i = 0; i < pertanyaan.length; i++) {
      if (!document.querySelector(`input[name="rating${i}"]:checked`)) {
        allRated = false;
        break;
      }
    }
    if (!meja || !usia || !gender || !freq || !rekomend || !allRated) {
      alert("Harap lengkapi semua field, termasuk rating & rekomendasi.");
      return;
    }

    saveBtn.disabled = true;
    spinner.style.display = "inline-block";
    setTimeout(() => {
      saveToLocal();
      voucherCard.style.display = "block";
      saveBtn.disabled = false;
      spinner.style.display = "none";
      alert("Simpan Berhasil ‚úÖ");
    }, 700);
  });

  // ====== Claim Voucher ======
  claimBtn.addEventListener("click", async () => {
    claimBtn.disabled = true;
    claimSpinner.style.display = "inline-block";
    claimText.style.display = "none";

    try {
      await savePDF();
      popup.style.display = "flex";

      // setelah popup voucher muncul ‚Üí tampilkan tombol reset & kirim
      finalButtons.style.display = "flex";
    } catch (e) {
      console.error(e);
      alert("Terjadi kesalahan saat membuat PDF.");
    } finally {
      claimBtn.disabled = false;
      claimSpinner.style.display = "none";
      claimText.style.display = "inline";
    }
  });

  // ====== Popup Close ======
  closePopup.addEventListener("click", () => (popup.style.display = "none"));

   // ====== Send ======
  downloadSendBtn.querySelector("span").innerText = "Kirim";
  downloadSendBtn.classList.add("golden");
  downloadSendBtn.addEventListener("click", () => {
    const phone = "6285712469835";
    const message = encodeURIComponent(
      "Halo Admin, saya mengirim hasil dari kuesioner."
    );
    window.open(`https://wa.me/${phone}?text=${message}`, "_blank");
  });

  // ====== Reset ======
  resetBtn.classList.add("golden");
  resetBtn.addEventListener("click", () => {
    if (confirm("Reset semua isi form dan hapus data lokal?")) {
      document.getElementById("survey").reset();
      voucherCard.style.display = "none";
      finalButtons.style.display = "none";
      localStorage.removeItem("ocean_kuesioner");
      alert("Form dan data lokal sudah direset.");
    }
  });

  // ====== Load Data ======
  loadFromLocal();
});

</script>
</body>
</html>






